#!/bin/bash

# –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: curl ... | bash -s [—è–∑—ã–∫]

LANGUAGE="${1:-en}"

echo "üéØ –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"
echo "================================"
echo "–Ø–∑—ã–∫: $LANGUAGE"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏
echo "1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è..."
echo "================================"
echo "üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞..."
echo "–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–µ–º–ª–µ–º–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å: 1 –ì–±–∏—Ç/—Å"
echo ""

# –°–∫–∞—á–∏–≤–∞–µ–º speedtest —Å–∫—Ä–∏–ø—Ç, —É–±–∏—Ä–∞–µ–º –∫–æ–º–∞–Ω–¥—ã –æ—á–∏—Å—Ç–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω—è–µ–º
SPEEDTEST_SCRIPT=$(mktemp)
wget -qO "$SPEEDTEST_SCRIPT" sh.vpn.lease/speedtest.sh
# –£–±–∏—Ä–∞–µ–º –∫–æ–º–∞–Ω–¥—ã –æ—á–∏—Å—Ç–∫–∏ —ç–∫—Ä–∞–Ω–∞ –∏–∑ —Å–∫—Ä–∏–ø—Ç–∞
sed -i.bak 's/\bclear\b//g' "$SPEEDTEST_SCRIPT"
bash "$SPEEDTEST_SCRIPT"
rm -f "$SPEEDTEST_SCRIPT" "$SPEEDTEST_SCRIPT.bak" 2>/dev/null

echo ""
echo "‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
echo "–ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –º–µ–Ω–µ–µ 1 –ì–±–∏—Ç/—Å - —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–º–µ–Ω—É —Å–µ—Ä–≤–µ—Ä–∞"

echo ""
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
echo "2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤..."
echo "=============================="
echo "üîç –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤..."
echo "–Ø–∑—ã–∫: $LANGUAGE"
echo "–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —Ä–µ–≥–∏–æ–Ω –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ —Å —Å–µ—Ä–≤–µ—Ä–∞"
echo ""

# –°–∫–∞—á–∏–≤–∞–µ–º place.sh —Å–∫—Ä–∏–ø—Ç, —É–±–∏—Ä–∞–µ–º –∫–æ–º–∞–Ω–¥—ã –æ—á–∏—Å—Ç–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω—è–µ–º
PLACE_SCRIPT=$(mktemp)
curl -Ls sh.vpn.lease/place.sh -o "$PLACE_SCRIPT"
# –£–±–∏—Ä–∞–µ–º –∫–æ–º–∞–Ω–¥—ã –æ—á–∏—Å—Ç–∫–∏ —ç–∫—Ä–∞–Ω–∞ –∏–∑ —Å–∫—Ä–∏–ø—Ç–∞
sed -i.bak 's/\bclear\b//g' "$PLACE_SCRIPT"
# –í—ã–ø–æ–ª–Ω—è–µ–º place.sh —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ–º bash –≤–º–µ—Å—Ç–æ source –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
bash "$PLACE_SCRIPT" -l "$LANGUAGE"
rm -f "$PLACE_SCRIPT" "$PLACE_SCRIPT.bak" 2>/dev/null

echo ""
echo "‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
echo "–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ"

echo ""
echo ""
echo "üèÅ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã!"
echo "=========================="
echo "–ö—Ä–∏—Ç–µ—Ä–∏–∏ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è:"
echo "‚Ä¢ –°–∫–æ—Ä–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å ‚â• 1 –ì–±–∏—Ç/—Å"
echo "‚Ä¢ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã"
echo "‚Ä¢ IP –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –±–ª—ç–∫–ª–∏—Å—Ç–∞—Ö"
echo "‚Ä¢ –†–µ–≥–∏–æ–Ω –¥–æ–ª–∂–µ–Ω –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ" 